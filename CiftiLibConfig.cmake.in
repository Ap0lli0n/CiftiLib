cmake_minimum_required(VERSION 2.8.11)

set(USING_QT5 @USING_QT5@)
set(USING_QT4 @USING_QT4@)
set(CIFTI_EXPORT_FILE @CIFTI_EXPORT_FILE@)
set(USING_OMP @OpenMP_FOUND@)

include(${CMAKE_CURRENT_LIST_DIR}/CiftiLib.cmake)

set(CiftiLib_LIBRARY Cifti)

if (USING_QT5)
    #get the magic -fPIC, reinterpreting Qt5::Core before it hits the linker, etc
    if (CiftiLib_FIND_REQUIRED)
        find_package(Qt5Core REQUIRED)
    else (CiftiLib_FIND_REQUIRED)
        find_package(Qt5Core)
        if (NOT Qt5Core_FOUND)
            unset(CiftiLib_LIBRARY)
        endif (Qt5Core_FOUND)
    endif (CiftiLib_FIND_REQUIRED)
endif (USING_QT5)

if (USING_QT4)
    #includes for QT4
    if (CiftiLib_FIND_REQUIRED)
        find_package(Qt4 4.8.0 REQUIRED)
    else (CiftiLib_FIND_REQUIRED)
        find_package(Qt4 4.8.0)
        if (NOT QT_FOUND)
            unset(CiftiLib_LIBRARY)
        endif (QT_FOUND)
    endif (CiftiLib_FIND_REQUIRED)
endif (USING_QT4)

if (USING_OMP)
    #similar for OpenMP
    if (CiftiLib_FIND_REQUIRED)
        find_package(OpenMP REQUIRED)
    else (CiftiLib_FIND_REQUIRED)
        find_package(OpenMP)
        if (NOT OpenMP_FOUND)
            unset(CiftiLib_LIBRARY)
        endif (NOT OpenMP_FOUND)
    endif (CiftiLib_FIND_REQUIRED)
endif  (USING_OMP)

include(FindPackageHandleStandardArgs)
find_package_handle_standard_args(CiftiLib DEFAULT_MSG CiftiLib_LIBRARY)
mark_as_advanced(CiftiLib_LIBRARY)

